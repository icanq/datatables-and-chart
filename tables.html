<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Vending Machine Data</title>
		<!-- css buat si jquery sama datatablenya (wajib kl nggak ga kerender) -->
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css"
		/>
		<!-- jQuery Pastikan jQuery berada pada paling atas saat pakai datatables -->
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<!-- DataTables JS -->
		<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
		<!-- DataTables Search Highlight -->
		<script src="https://cdn.datatables.net/plug-ins/1.11.5/features/searchHighlight/dataTables.searchHighlight.min.js"></script>
		<!-- jQuery Highlight -->
		<script src="https://bartaz.github.io/sandbox.js/jquery.highlight.js"></script>
	</head>

	<style>
		body {
			font-family: Helvetica, Arial, sans-serif;
			margin: 20px;
		}
		table.dataTable {
			width: 100%;
			margin: 0 auto;
			border-collapse: collapse;
		}

		table.dataTable thead th {
			background-color: papayawhip;
		}

		#loading {
			display: none;
			position: fixed;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
			font-size: 20px;
			color: #333;
		}

		.spinner {
			width: 40px;
			height: 40px;
			border: 4px solid rgba(0, 0, 0, 0.1);
			border-radius: 50%;
			border-top-color: #333;
			animation: spin 1s ease-in-out infinite;
		}

		@keyframes spin {
			to {
				transform: rotate(360deg);
			}
		}
	</style>

	<body>
		<h1>Vending Machine Data</h1>

		<div id="loading">
			<div class="spinner"></div>
			Loading...
		</div>

		<table id="example" class="display" style="width: 100%">
			<thead id="tableHead">
				<tr>
					<th>Status</th>
					<th>Device ID</th>
					<th>Location</th>
					<th>Machine</th>
					<th>Product</th>
					<th>Category</th>
					<th>Transaction</th>
					<th>TransDate</th>
					<th>Type</th>
					<th>RCoil</th>
					<th>RPrice</th>
					<th>RQty</th>
					<th>MCoil</th>
					<th>MPrice</th>
					<th>MQty</th>
					<th>LineTotal</th>
					<th>TransTotal</th>
					<th>Prcd Date</th>
				</tr>
			</thead>
		</table>
	</body>
	<script>
		// untuk bisa mengambil data ada dua cara, yg pertama bisa langsung dari datatables api, dengan mengambil data pakai cara ajax
		$(document).ready(() => {
			$("#loading").show();
			$("#tableHead").hide();
			$.ajax({
				url: "./vending_machine_sales.json",
				dataType: "json",
				success: function (data) {
					$("#loading").hide();
					$("#tableHead").show();
					// console.log(data);
					// masukin data ke dalam table
					$("#example").DataTable({
						data: data,
						columns: [
							{ data: "Status" },
							{ data: "Device ID" },
							{ data: "Location" },
							{ data: "Machine" },
							{ data: "Product" },
							{ data: "Category" },
							{ data: "Transaction" },
							{ data: "TransDate" },
							{ data: "Type" },
							{ data: "RCoil" },
							{ data: "RPrice" },
							{ data: "RQty" },
							{ data: "MCoil" },
							{ data: "MPrice" },
							{ data: "MQty" },
							{ data: "LineTotal" },
							{ data: "TransTotal" },
							{ data: "Prcd Date" },
						],
					});
				},
			});
		});

		// untuk cara kedua kalian bisa pake cara fetch biasa jg bisa
	</script>
</html>
